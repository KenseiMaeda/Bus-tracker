/* ---- ベース ---- */
html, body { height: 100%; margin: 0; }
body{
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  font:14px system-ui,-apple-system,Segoe UI,Roboto,Noto Sans JP,Arial,sans-serif;
  background:#f7f7f8;
}

/* ---- ヘッダー ---- */
header{
  flex: 0 0 auto;
  display:flex;gap:.75rem;align-items:center;
  padding:12px 16px;
  background:#0f141a;color:#e8eef5;border-bottom:1px solid #1e2630;
}
header h1{font-size:16px;margin:0}

/* ---- 本体（サイドバー＋マップ）---- */
#app{
  flex: 1 1 auto;
  display:grid;
  grid-template-columns:360px 1fr;
  min-height: 0;
}

/* ---- サイドバー ---- */
#sidebar{
  border-right:1px solid #e5e7eb;overflow:auto;background:#fff;
}

/* ---- マップ ---- */
#map{ width:100%; height:100%; position:relative; z-index:0; }
.maplibregl-canvas { outline: none; }

/* ---- レスポンシブ ---- */
@media (max-width: 960px){
  #app{ grid-template-columns:1fr; grid-template-rows:300px 1fr; }
  #sidebar{ order:2 }
  #map{ order:1 }
}

/* ---- 共通UI ---- */
.section{padding:12px 14px}
.list{display:grid;gap:8px;padding:0 14px 14px}
.item{display:flex;justify-content:space-between;gap:6px;padding:8px 10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;align-items:center}
.muted{color:#6b7280;font-size:12px}
.legend{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.dot{width:12px;height:12px;border-radius:50%;display:inline-block;margin-right:6px}

/* ---- カード/フォーム ---- */
.card{margin:12px 14px;padding:12px;border:1px solid #e5e7eb;border-radius:12px;background:#fafafa;display:grid;gap:10px}
.row{display:flex;gap:8px;align-items:center}
.row label{min-width:80px;color:#374151}
select,button{font:inherit}
select{padding:6px 8px;border:1px solid #d1d5db;border-radius:8px;background:#fff}
button.primary{padding:8px 10px;border-radius:8px;border:1px solid #0ea5e9;background:#38bdf8;color:#0b1726;cursor:pointer}
button.primary:disabled{opacity:.6;cursor:not-allowed}
.result{border-top:1px dashed #e5e7eb;padding-top:8px}
.result .best{font-weight:700}
.result table{width:100%;border-collapse:collapse;margin-top:6px}
.result th,.result td{padding:6px 4px;border-bottom:1px solid #f0f0f0;text-align:left;font-size:13px}
.pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#eef6ff;border:1px solid #dbeafe}

/* ---- バス：レーダー波マーカー ---- */
.bus-icon{position:relative;width:22px;height:22px;border-radius:50%}
.bus-icon .core{
  position:absolute; inset:5px; border-radius:50%;
  background:var(--dot,#22d3ee);
  box-shadow:0 0 0 2px #fff, 0 0 8px rgba(0,0,0,.18);
}
.bus-icon::before, .bus-icon::after{
  content:""; position:absolute; inset:-2px; border-radius:50%;
  border:2px solid var(--dot,#22d3ee); opacity:.6;
  animation: radar-wave 2.2s ease-out infinite;
}
.bus-icon::after{ animation-delay:.8s; opacity:.35; }
@keyframes radar-wave{
  0%{ transform:scale(.6); opacity:.7 }
  70%{ transform:scale(1.9); opacity:0 }
  100%{ opacity:0 }
}
.bus-icon.stale{ filter:grayscale(1); }
.bus-icon.very { filter:grayscale(1); opacity:.5; }

/* ---- 停留所 ---- */
.stop-beacon{background:#fff;border:2px solid #9ca3af;width:12px;height:12px;border-radius:50%}
.stop-nobeacon{background:#fff;border:2px dashed #9ca3af;width:12px;height:12px;border-radius:50%}

/* ---- 乗車予定ピン ---- */
.pin-icon{ background:transparent; }

/* ---- ヘッダ：ミニ設定メニュー ---- */
.toolbar{margin-left:auto;display:flex;gap:8px;align-items:center}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:8px;border:1px solid #2a3442;background:#151c27;color:#e8eef5;cursor:pointer}
.icon-btn:hover{background:#1a2330}
.menu-wrap{position:relative}
.menu{position:absolute;top:40px;right:0;background:#0b1220;border:1px solid #2a3442;border-radius:10px;min-width:220px;box-shadow:0 10px 30px rgba(0,0,0,.35);display:none;z-index:999}
.menu.open{display:block}
.menu a{display:flex;gap:8px;align-items:center;padding:10px 12px;color:#e8eef5;text-decoration:none}
.menu a:hover{background:#131c28}
.menu .sep{height:1px;background:#1e2633;margin:4px 0}
